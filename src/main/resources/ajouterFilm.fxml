<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.web.WebView?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.effect.*?>
<?import javafx.scene.paint.Color?>
<?import javafx.scene.shape.Rectangle?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.web.HTMLEditor?>

<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="Controllers.FilmController"
            prefHeight="700.0" prefWidth="900.0"
            style="-fx-background-color: linear-gradient(to bottom right, #dcdce4, #a5c0ef);">

    <!-- Decorative elements -->
    <Circle radius="200" style="-fx-fill: radial-gradient(radius 100%, rgba(26, 188, 156, 0.1), transparent);"
            AnchorPane.leftAnchor="-100" AnchorPane.topAnchor="-100"/>
    <Rectangle width="300" height="700" style="-fx-fill: linear-gradient(to bottom, rgba(52, 152, 219, 0.08), transparent);"
               AnchorPane.rightAnchor="0" AnchorPane.topAnchor="0"/>

    <VBox alignment="TOP_CENTER" spacing="30"
          AnchorPane.leftAnchor="50.0" AnchorPane.rightAnchor="50.0"
          AnchorPane.topAnchor="40.0" AnchorPane.bottomAnchor="40.0">

        <!-- Header -->
        <HBox alignment="CENTER" spacing="15">
            <Rectangle width="50" height="4" arcWidth="5" arcHeight="5"
                       style="-fx-fill: linear-gradient(to right, #000000, #ff0101);"/>
            <Label text="ðŸŽ¬ Nouveau Film"
                   style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #000000; -fx-font-family: 'Segoe UI'; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 3, 0.5, 0, 1);"/>
            <Rectangle width="50" height="4" arcWidth="5" arcHeight="5"
                       style="-fx-fill: linear-gradient(to right, #000000, #db3434);"/>
        </HBox>

        <!-- Main Form -->
        <GridPane hgap="25" vgap="25"
                  style="-fx-background-color: rgba(255,255,255,0.08); -fx-background-radius: 20; -fx-padding: 35; -fx-border-color: rgba(255,255,255,0.1); -fx-border-radius: 20; -fx-border-width: 1; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.3), 15, 0, 0, 5);"
                  maxWidth="800">

            <columnConstraints>
                <ColumnConstraints halignment="RIGHT" minWidth="150" prefWidth="150"/>
                <ColumnConstraints halignment="LEFT" minWidth="250" prefWidth="250"/>
                <ColumnConstraints halignment="CENTER" minWidth="150" prefWidth="150"/>
            </columnConstraints>

            <!-- Titre -->
            <Label text="Titre du film:" GridPane.rowIndex="0" GridPane.columnIndex="0"
                   style="-fx-text-fill: #4768ef; -fx-font-size: 14px; -fx-font-weight: bold;"/>
            <TextField fx:id="titreField" GridPane.rowIndex="0" GridPane.columnIndex="1"
                       promptText="Entrez le titre du film"
                       style="-fx-background-radius: 8; -fx-background-color: rgba(255,255,255,0.9); -fx-padding: 8; -fx-font-size: 14px;"/>

            <!-- RÃ©alisateur -->
            <Label text="RÃ©alisateur:" GridPane.rowIndex="1" GridPane.columnIndex="0"
                   style="-fx-text-fill: #4768ef; -fx-font-size: 14px; -fx-font-weight: bold;"/>
            <TextField fx:id="directeurField" GridPane.rowIndex="1" GridPane.columnIndex="1"
                       promptText="Nom du rÃ©alisateur"
                       style="-fx-background-radius: 8; -fx-background-color: rgba(255,255,255,0.9); -fx-padding: 8; -fx-font-size: 14px;"/>

            <!-- Note -->
            <Label text="Note:" GridPane.rowIndex="2" GridPane.columnIndex="0"
                   style="-fx-text-fill: #4768ef; -fx-font-size: 14px; -fx-font-weight: bold;"/>
            <Spinner fx:id="noteField" GridPane.rowIndex="2" GridPane.columnIndex="1"
                     style="-fx-background-radius: 8; -fx-background-color: rgba(255,255,255,0.9);"/>

            <!-- Genre -->
            <Label text="Genre:" GridPane.rowIndex="3" GridPane.columnIndex="0"
                   style="-fx-text-fill: #4768ef; -fx-font-size: 14px; -fx-font-weight: bold;"/>
            <ComboBox fx:id="genreField" GridPane.rowIndex="3" GridPane.columnIndex="1"
                      promptText="SÃ©lectionnez un genre"
                      style="-fx-background-radius: 8; -fx-background-color: rgba(255,255,255,0.9); -fx-font-size: 14px;"/>

            <!-- DurÃ©e -->
            <Label text="DurÃ©e:" GridPane.rowIndex="4" GridPane.columnIndex="0"
                   style="-fx-text-fill: #4768ef; -fx-font-size: 14px; -fx-font-weight: bold;"/>
            <TextField fx:id="dureeField" GridPane.rowIndex="4" GridPane.columnIndex="1"
                       promptText="Ex: 120 minutes"
                       style="-fx-background-radius: 8; -fx-background-color: rgba(255,255,255,0.9); -fx-padding: 8; -fx-font-size: 14px;"/>

            <!-- Dates -->
            <Label text="Dates de projection:" GridPane.rowIndex="5" GridPane.columnIndex="0"
                   style="-fx-text-fill: #4768ef; -fx-font-size: 14px; -fx-font-weight: bold;"/>
            <HBox spacing="15" GridPane.rowIndex="5" GridPane.columnIndex="1">
                <DatePicker fx:id="dateDebutField" promptText="DÃ©but"
                            style="-fx-background-radius: 8; -fx-background-color: rgba(255,255,255,0.9); -fx-font-size: 14px;"/>
                <Label text="Ã " style="-fx-text-fill: #4768ef; -fx-font-size: 14px;"/>
                <DatePicker fx:id="dateFinField" promptText="Fin"
                            style="-fx-background-radius: 8; -fx-background-color: rgba(255,255,255,0.9); -fx-font-size: 14px;"/>
            </HBox>

            <!-- Image -->
            <Label text="SÃ©lectionner une image:" GridPane.rowIndex="6" GridPane.columnIndex="0"
                   style="-fx-text-fill: #4768ef; -fx-font-size: 14px; -fx-font-weight: bold;"/>
            <HBox spacing="10" GridPane.rowIndex="6" GridPane.columnIndex="1">
                <TextField fx:id="imageFilmField" promptText="Aucun fichier sÃ©lectionnÃ©" editable="false"
                           style="-fx-background-radius: 8 0 0 8; -fx-background-color: rgba(255,255,255,0.9); -fx-padding: 8; -fx-font-size: 14px;" HBox.hgrow="ALWAYS"/>
                <Button text="Parcourir..." onAction="#handleImageUpload"
                        style="-fx-background-color: #ff0101; -fx-text-fill: white; -fx-font-size: 14px; -fx-background-radius: 0 8 8 0; -fx-padding: 8 15; -fx-cursor: hand;"/>
            </HBox>

            <!-- AperÃ§u -->
            <Label text="AperÃ§u de l'image:" GridPane.rowIndex="7" GridPane.columnIndex="0"
                   style="-fx-text-fill: #4768ef; -fx-font-size: 14px; -fx-font-weight: bold;"/>
            <StackPane GridPane.rowIndex="7" GridPane.columnIndex="1">
                <ImageView fx:id="filmImageView" fitHeight="180" fitWidth="180" preserveRatio="true"
                           style="-fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 10, 0.3, 0, 0);"/>
            </StackPane>

            <!-- Description -->
            <Label text="Description:" GridPane.rowIndex="8" GridPane.columnIndex="0"
                   style="-fx-text-fill: #4768ef; -fx-font-size: 14px; -fx-font-weight: bold;"/>
            <HTMLEditor fx:id="descriptionEditor" GridPane.rowIndex="8" GridPane.columnIndex="1" GridPane.columnSpan="2"
                        prefHeight="200" prefWidth="500"
                        style="-fx-border-color: rgba(255,255,255,0.2); -fx-border-radius: 8;"/>
        </GridPane>

        <!-- Submit Button -->
        <Button text="CrÃ©er le film" onAction="#addFilm"
                style="-fx-background-color: linear-gradient(to right, #ff0101, #ff0101); -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold; -fx-background-radius: 10; -fx-padding: 12 30; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.2), 8, 0, 0, 2); -fx-cursor: hand;"/>
    </VBox>
</AnchorPane>
