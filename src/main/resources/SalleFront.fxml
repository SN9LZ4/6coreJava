<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.effect.*?>
<?import javafx.geometry.*?>

<?import javafx.scene.shape.Line?>
<?import javafx.scene.web.WebView?>
<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="Controllers.SalleFrontController"
            prefWidth="1200.0" prefHeight="900.0"
            style="-fx-background-color: linear-gradient(to bottom right, #fcfcfc, #b1c8f1);">
    <!-- Barre de navigation moderne -->
    <HBox style="-fx-background-color: #4169e1;
                 -fx-padding: 15;
                 -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 15, 0, 0, 2);"
          alignment="CENTER_LEFT"
          minHeight="70" prefHeight="70" maxHeight="70"
          AnchorPane.topAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">

        <HBox alignment="CENTER_LEFT" spacing="15">
            <Label text="GESTION DES SALLES"
                   style="-fx-font-size: 24px;
                          -fx-text-fill: white;
                          -fx-font-weight: bold;
                          -fx-font-family: 'Montserrat', 'Segoe UI';"/>
            <Line endX="0" endY="30" startX="0" startY="0" stroke="white" strokeWidth="2.0" opacity="0.6"/>
            <Label fx:id="filmTitleLabel"
                   text="Film sélectionné : Inconnu"
                   style="-fx-font-size: 16px; -fx-text-fill: white; -fx-font-family: 'Montserrat', 'Segoe UI';"/>
        </HBox>

        <Region HBox.hgrow="ALWAYS"/>
    </HBox>

    <!-- Container principal avec ScrollPane pour le contenu -->
    <ScrollPane fitToWidth="true"
                hbarPolicy="NEVER"
                vbarPolicy="AS_NEEDED"
                style="-fx-background: #fefefe; -fx-border-color: transparent;"
                AnchorPane.topAnchor="70.0" AnchorPane.bottomAnchor="0.0"
                AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">

        <VBox spacing="15" style="-fx-padding: 20;">
            <!-- Section film et vidéo -->
            <HBox spacing="15" HBox.hgrow="ALWAYS">
                <!-- Carte du film avec design épuré -->
                <VBox fx:id="filmCardContainer" spacing="0" HBox.hgrow="ALWAYS"
                      style="-fx-background-color: #ccccf6;
                             -fx-background-radius: 12px;
                             -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 20, 0, 0, 4);
                             -fx-padding: 15;">
                    <!-- Le contenu sera généré dynamiquement par la méthode setFilm() -->
                </VBox>

                <!-- Conteneur vidéo YouTube -->
                <VBox fx:id="videoContainer" spacing="0" HBox.hgrow="ALWAYS"
                      style="-fx-background-color: white;
                             -fx-background-radius: 12px;
                             -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 20, 0, 0, 4);
                             -fx-padding: 10;">
                    <Label text="BANDE-ANNONCE"
                           style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-padding: 0 0 10 5;"/>
                    <WebView fx:id="youtubeWebView"
                             minWidth="400" minHeight="225"
                             prefWidth="600" prefHeight="337.5"
                             maxWidth="800" maxHeight="450"/>
                </VBox>
            </HBox>
            <!-- Dans VBox filmCardContainer -->
            <VBox spacing="10" style="-fx-padding: 10;">
                <Label text="Notez ce film:" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>

                <!-- Étoiles interactives -->
                <HBox fx:id="interactiveStars" spacing="5">
                    <!-- 5 étoiles vides qui seront rendues interactives -->
                    <Label fx:id="star1" text="☆" style="-fx-font-size: 24px; -fx-text-fill: #ccc; -fx-cursor: hand;"/>
                    <Label fx:id="star2" text="☆" style="-fx-font-size: 24px; -fx-text-fill: #ccc; -fx-cursor: hand;"/>
                    <Label fx:id="star3" text="☆" style="-fx-font-size: 24px; -fx-text-fill: #ccc; -fx-cursor: hand;"/>
                    <Label fx:id="star4" text="☆" style="-fx-font-size: 24px; -fx-text-fill: #ccc; -fx-cursor: hand;"/>
                    <Label fx:id="star5" text="☆" style="-fx-font-size: 24px; -fx-text-fill: #ccc; -fx-cursor: hand;"/>
                </HBox>

                <!-- Affichage moyenne -->
                <HBox spacing="5" alignment="CENTER_LEFT">
                    <Label text="Moyenne:" style="-fx-font-weight: bold;"/>
                    <Label fx:id="averageRatingLabel" text="3.2/5"/>
                    <HBox fx:id="averageStars" spacing="2">
                        <!-- Étoiles de la moyenne seront ajoutées dynamiquement -->
                    </HBox>
                    <Label fx:id="ratingCountLabel" text="(0 votes)" style="-fx-text-fill: #666; -fx-font-size: 12px;"/>
                </HBox>
            </VBox>
            <!-- Section Recommandations -->
            <VBox fx:id="recommendationsContainer" spacing="10"
                  style="-fx-background-color: #c0c0f1;
                         -fx-background-radius: 12px;
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 20, 0, 0, 4);
                         -fx-padding: 20;">
                <Label text="Recommandations Similaires"
                       style="-fx-font-size: 20px; -fx-font-weight: bold;"/>
                <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="NEVER"
                            style="-fx-background-color: transparent; -fx-padding: 10 0;">
                    <HBox spacing="15" style="-fx-padding: 5;">
                        <!-- Les cartes de recommandations seront ajoutées dynamiquement -->
                    </HBox>
                </ScrollPane>
            </VBox>

            <!-- Section de recherche avec style minimaliste -->
            <VBox spacing="15"
                  style="-fx-background-color: white;
                         -fx-background-radius: 12px;
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 20, 0, 0, 4);
                         -fx-padding: 20;">
                <HBox alignment="CENTER_LEFT">
                    <Label text="Recherche"
                           style="-fx-font-size: 20px;
                                  -fx-text-fill: #2C3E50;
                                  -fx-font-weight: bold;
                                  -fx-font-family: 'Montserrat', 'Segoe UI';"/>
                    <Label text=" avancée"
                           style="-fx-font-size: 20px;
                                  -fx-text-fill: #4169e1;
                                  -fx-font-weight: bold;
                                  -fx-font-family: 'Montserrat', 'Segoe UI';"/>
                </HBox>

                <Separator style="-fx-background-color: #e0e0e0; -fx-opacity: 0.6;"/>

                <GridPane hgap="15" vgap="15">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="20" halignment="RIGHT"/>
                        <ColumnConstraints percentWidth="30" halignment="LEFT"/>
                        <ColumnConstraints percentWidth="20" halignment="RIGHT"/>
                        <ColumnConstraints percentWidth="30" halignment="LEFT"/>
                    </columnConstraints>

                    <rowConstraints>
                        <RowConstraints prefHeight="40" vgrow="SOMETIMES"/>
                        <RowConstraints prefHeight="40" vgrow="SOMETIMES"/>
                        <RowConstraints prefHeight="40" vgrow="SOMETIMES"/>
                    </rowConstraints>

                    <!-- Ligne 1 -->
                    <Label text="Type de salle:" GridPane.columnIndex="0" GridPane.rowIndex="0"
                           style="-fx-font-weight: 600; -fx-text-fill: #2C3E50; -fx-font-size: 14px;"/>
                    <ComboBox fx:id="typeSalleComboBox" GridPane.columnIndex="1" GridPane.rowIndex="0"
                              promptText="Tous les types"
                              style="-fx-background-radius: 6px; -fx-font-size: 14px; -fx-background-color: #f8f9fa;
                                     -fx-border-color: #e0e0e0; -fx-border-radius: 6px; -fx-border-width: 1px;"
                              maxWidth="Infinity"/>

                    <Label text="État:" GridPane.columnIndex="2" GridPane.rowIndex="0"
                           style="-fx-font-weight: 600; -fx-text-fill: #2C3E50; -fx-font-size: 14px;"/>
                    <ComboBox fx:id="etatSalleComboBox" GridPane.columnIndex="3" GridPane.rowIndex="0"
                              promptText="Tous les états"
                              style="-fx-background-radius: 6px; -fx-font-size: 14px; -fx-background-color: #f8f9fa;
                                     -fx-border-color: #e0e0e0; -fx-border-radius: 6px; -fx-border-width: 1px;"
                              maxWidth="Infinity"/>

                    <!-- Ligne 2 -->
                    <Label text="Capacité min:" GridPane.columnIndex="0" GridPane.rowIndex="1"
                           style="-fx-font-weight: 600; -fx-text-fill: #2C3E50; -fx-font-size: 14px;"/>
                    <TextField fx:id="capaciteMinField" promptText="Min" GridPane.columnIndex="1" GridPane.rowIndex="1"
                               style="-fx-background-radius: 6px; -fx-background-color: #f8f9fa;
                                      -fx-border-color: #e0e0e0; -fx-border-radius: 6px; -fx-border-width: 1px; -fx-padding: 8;"
                               maxWidth="Infinity"/>

                    <Label text="Capacité max:" GridPane.columnIndex="2" GridPane.rowIndex="1"
                           style="-fx-font-weight: 600; -fx-text-fill: #2C3E50; -fx-font-size: 14px;"/>
                    <TextField fx:id="capaciteMaxField" promptText="Max" GridPane.columnIndex="3" GridPane.rowIndex="1"
                               style="-fx-background-radius: 6px; -fx-background-color: #f8f9fa;
                                      -fx-border-color: #e0e0e0; -fx-border-radius: 6px; -fx-border-width: 1px; -fx-padding: 8;"
                               maxWidth="Infinity"/>

                    <!-- Ligne 3 avec boutons élégants -->
                    <HBox spacing="15" alignment="CENTER_RIGHT"
                          GridPane.columnIndex="3" GridPane.rowIndex="2">
                        <Button fx:id="reinitialiserButton" text="Réinitialiser" onAction="#onResetClick"
                                style="-fx-background-color: transparent; -fx-text-fill: #4169e1;
                                       -fx-border-color: #4169e1; -fx-border-radius: 6px; -fx-background-radius: 6px;
                                       -fx-padding: 8 16; -fx-font-weight: bold; -fx-cursor: hand;"/>
                        <Button fx:id="rechercherButton" text="Rechercher" onAction="#onRechercherClick"
                                style="-fx-background-color: #4169e1; -fx-text-fill: white;
                                       -fx-background-radius: 6px; -fx-padding: 8 16; -fx-font-weight: bold;
                                       -fx-effect: dropshadow(gaussian, rgba(65,105,225,0.56), 10, 0, 0, 2); -fx-cursor: hand;"/>
                    </HBox>
                </GridPane>
            </VBox>

            <!-- Section des résultats avec style cohérent -->
            <VBox spacing="10" VBox.vgrow="ALWAYS">
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="Résultats"
                           style="-fx-font-size: 18px;
                                  -fx-text-fill: #2C3E50;
                                  -fx-font-weight: bold;
                                  -fx-font-family: 'Montserrat', 'Segoe UI';"/>
                    <Label fx:id="resultCountLabel" text="0 salles trouvées"
                           style="-fx-font-size: 14px; -fx-text-fill: #4169e1; -fx-font-weight: 600;"/>
                    <Region HBox.hgrow="ALWAYS"/>
                </HBox>

                <ScrollPane fx:id="scrollPane"
                            fitToWidth="true"
                            VBox.vgrow="ALWAYS"
                            style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-padding: 0;">
                    <TilePane fx:id="salleContainer"
                              hgap="15" vgap="15"
                              prefColumns="3" prefTileWidth="350"
                              style="-fx-padding: 5 0;">
                        <!-- Contenu dynamique des salles -->
                    </TilePane>
                </ScrollPane>
            </VBox>
        </VBox>
    </ScrollPane>
</AnchorPane>